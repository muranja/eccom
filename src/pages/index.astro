---
import Layout from "../layouts/Layout.astro";
import Testimonials from "../components/Testimonials.astro";
import { SearchFilter } from "../components/SearchFilter";
import { ProductGrid } from "../components/ProductGrid";
// import { SocialProof } from "../components/SocialProof"; // Disabled: social proof popup
import { getCollection } from "astro:content";

const allProducts = await getCollection("products");
---

<Layout title="SasaGadgets | Get Gadgets Now - Phones, Laptops & Tech in Kenya">
    <!-- Hero Section with Trust Badge -->
    <div class="text-center mb-12 pt-8">
        <div
            class="inline-flex items-center gap-2 bg-emerald-50 border border-emerald-100 px-4 py-1.5 rounded-full mb-6"
        >
            <span class="relative flex h-3 w-3">
                <span
                    class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"
                ></span>
                <span
                    class="relative inline-flex rounded-full h-3 w-3 bg-emerald-500"
                ></span>
            </span>
            <span
                class="text-xs font-bold text-emerald-800 uppercase tracking-wide"
                >Verified Business â€¢ Nairobi CBD</span
            >
        </div>
        <h1
            class="text-4xl md:text-5xl font-black text-slate-900 mb-4 tracking-tight"
        >
            Get Gadgets <span
                class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-500 to-teal-500"
                >Now (Sasa!)</span
            >
        </h1>
        <p class="text-lg text-gray-700 max-w-2xl mx-auto">
            Latest smartphones, laptops & tech delivered to your doorstep.
            <br />Pay via <span class="font-bold text-emerald-700"
                >M-Pesa on Delivery</span
            >.
        </p>
    </div>

    <!-- Search & Filter -->
    <SearchFilter client:visible products={allProducts} />

    <!-- Products Grid -->
    <section aria-labelledby="products-heading">
        <h2 id="products-heading" class="sr-only">Available Products</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-20">
            <ProductGrid client:visible products={allProducts} />
        </div>
    </section>

    <!-- Social Proof Notification - Disabled -->
    <!-- <SocialProof client:idle /> -->

    <!-- Social Proof Section -->
    <Testimonials />
</Layout>
